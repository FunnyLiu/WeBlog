<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>demo</title>
    <script src="/demo/bower_components/codemirror/lib/codemirror.js"></script>
    <script src="/demo/bower_components/codemirror/mode/xml/xml.js"></script>
    <script src="/demo/bower_components/codemirror/mode/javascript/javascript.js"></script>
    <script src="/demo/bower_components/codemirror/mode/css/css.js"></script>
    <script src="/demo/bower_components/jquery/dist/jquery.js"></script>
<link rel="stylesheet" href="css/css_red_rain.css"></head>
<body>
<div class="m-rain f-pr">
    <div class="m-rain-red f-pa"></div>
    <div class="m-rain-red f-pa"></div>
    <div class="m-rain-red f-pa"></div>
    <div class="m-rain-red f-pa"></div>
    <div class="m-rain-red f-pa"></div>
</div>

<script>
    var bags = $('.m-rain-red');
    bags.addClass('bag');
    bags.on('animationend',function(){
        refreshDom($(this));
    });
    //初始化进入
    bags.each(function(index,item){
        refreshDom(item);
    });

    //给红包的x坐标增加随机性
    function refreshDom(dom){
        $(dom).css('left',1400*Math.random());
        bags.removeClass('bag');
        bags.hide();
        bags.show();
        bags.addClass('bag');
    }
</script>

<div class="m-code f-pa">
<div class="m-code_hidBtn">&#x2228;</div>
<div class="m-code_content" style="display: flex;">

<textarea class="u-html g-panel">
    <div class="m-rain f-pr">
        <div class="m-rain-red f-pa"></div>
        <div class="m-rain-red f-pa"></div>
        <div class="m-rain-red f-pa"></div>
        <div class="m-rain-red f-pa"></div>
        <div class="m-rain-red f-pa"></div>
    </div>
</textarea>
<textarea class="u-css g-panel">
.m-rain {
    width:100%;
    height:600px;
    background:yellow;
    &-red {
        width:30px;
        height:30px;
        background:red;
    }
}
.bag {
    animation:drop 3s linear;
}
@keyframes drop {
    0% {
        transform: translate3d(0,-34px,0);
    }
    100% {
        transform: translate3d(0,634px,0);
    }
}
</textarea>
<textarea class="u-js g-panel">
    var bags = $('.m-rain-red');
    bags.addClass('bag');
    bags.on('animationend',function(){
        refreshDom($(this));
    });
    //初始化进入
    bags.each(function(index,item){
        refreshDom(item);
    });

    //给红包的x坐标增加随机性
    function refreshDom(dom){
        $(dom).css('left',1400*Math.random());
        bags.removeClass('bag');
        bags.hide();
        bags.show();
        bags.addClass('bag');
    }
</textarea>
</div>
</div>
<script src="./js/base/base.js"></script>
</body>
</html>